(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{32:function(e){e.exports=JSON.parse('{"a":"example"}')},60:function(e,n,t){t(61),e.exports=t(82)},61:function(e,n){"serviceWorker"in navigator&&window.addEventListener("load",(function(){navigator.serviceWorker.register("/react-native-msal/expo-service-worker.js",{scope:"/react-native-msal/"}).then((function(e){})).catch((function(e){console.info("Failed to register service-worker",e)}))}))},82:function(e,n,t){"use strict";t.r(n);var r=t(33),a=t(8),o=t(1),c=t.n(o),s=t(30),i=t.n(s),u=t(0),l=t.n(u),p=t(39),f=t(59),h=t(2),m=t(56),d=t(16),v=t(4),g=t(84),w=t(35),b=t.n(w),y=t(31),E=t.n(y),S=t(36),O=t.n(S),x=t(37),I=t.n(x),A=t(38);let k,T,C;function P(e){switch(e){case k.SELECT_ACCOUNT:return"select_account";case k.LOGIN:return"login";case k.CONSENT:return"consent";case k.WHEN_REQUIRED:return"none"}}!function(e){e[e.SELECT_ACCOUNT=0]="SELECT_ACCOUNT",e[e.LOGIN=1]="LOGIN",e[e.CONSENT=2]="CONSENT",e[e.WHEN_REQUIRED=3]="WHEN_REQUIRED",e[e.DEFAULT=3]="DEFAULT"}(k||(k={})),function(e){e[e.fullScreen=0]="fullScreen",e[e.pageSheet=1]="pageSheet",e[e.formSheet=2]="formSheet",e[e.currentContext=3]="currentContext",e[e.custom=4]="custom",e[e.overFullScreen=5]="overFullScreen",e[e.overCurrentContext=6]="overCurrentContext",e[e.popover=7]="popover",e[e.blurOverFullScreen=8]="blurOverFullScreen",e[e.none=-1]="none",e[e.automatic=-2]="automatic"}(T||(T={})),function(e){e[e.DEFAULT=0]="DEFAULT",e[e.AUTHENTICATION_SESSION=1]="AUTHENTICATION_SESSION",e[e.SAFARI_VIEW_CONTROLLER=2]="SAFARI_VIEW_CONTROLLER",e[e.WK_WEB_VIEW=3]="WK_WEB_VIEW"}(C||(C={}));var _=class{constructor(e){var n,t,r;this.config=e,r=void 0,(t="_pca")in(n=this)?Object.defineProperty(n,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[t]=r,this._pca=new A.a(this.config)}async acquireToken(e){const{promptType:n,...t}=e,{accessToken:r,account:a,expiresOn:o,idToken:c,idTokenClaims:s,scopes:i,tenantId:u}=await this._pca.acquireTokenPopup(n?{...t,prompt:P(n)}:t);return{accessToken:r,account:{identifier:a.homeAccountId,environment:a.environment,tenantId:a.tenantId,username:a.username,claims:s},expiresOn:o.getTime(),idToken:c,scopes:i,tenantId:u}}async acquireTokenSilent(e){var n;const{accessToken:t,account:r,expiresOn:a,idToken:o,idTokenClaims:c,scopes:s,tenantId:i}=await this._pca.acquireTokenSilent({...e,account:{...e.account,homeAccountId:e.account.identifier,environment:null!==(n=e.account.environment)&&void 0!==n?n:""}});return{accessToken:t,account:{identifier:r.homeAccountId,environment:r.environment,tenantId:r.tenantId,username:r.username,claims:c},expiresOn:a.getTime(),idToken:o,scopes:s,tenantId:i}}getAccounts(){const e=this._pca.getAllAccounts();return Promise.resolve(e.map(e=>{const{homeAccountId:n,environment:t,tenantId:r,username:a}=e;return{identifier:n,environment:t,tenantId:r,username:a}}))}getAccount(e){const n=this._pca.getAccountByHomeId(e);if(null==n)return Promise.reject("Account not found");{const{homeAccountId:e,environment:t,tenantId:r,username:a}=n;return Promise.resolve({identifier:e,environment:t,tenantId:r,username:a})}}removeAccount(e){var n;return this._pca.logout({account:{...e,homeAccountId:e.identifier,environment:null!==(n=e.environment)&&void 0!==n?n:""}}),Promise.resolve(!0)}signOut(e){return this.removeAccount(e.account)}};function N(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function B(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?N(Object(t),!0).forEach((function(n){b()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):N(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var W=function(e){return new Promise((function(n){return setTimeout(n,e)}))},R=function(){function e(n){var t=this;O()(this,e),this.config=n;var r=this.config.auth,a=(r.authorityBase,r.policies),o=E()(r,["authorityBase","policies"]),c=this.getAuthority(a.signInSignUp),s=Object.values(a).map((function(e){return t.getAuthority(e)}));this.pca=new _(B(B({},this.config),{},{auth:B({authority:c,knownAuthorities:s},o)}))}return I()(e,[{key:"signIn",value:function(n){return c.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.a.awrap(this.isSignedIn());case 2:if(!t.sent){t.next=5;break}throw Error("A user is already signed in");case 5:return t.prev=5,t.next=8,c.a.awrap(this.pca.acquireToken(n));case 8:return t.abrupt("return",t.sent);case 11:if(t.prev=11,t.t0=t.catch(5),!t.t0.message.includes(e.B2C_PASSWORD_CHANGE)||!this.config.auth.policies.passwordReset){t.next=19;break}return t.next=16,c.a.awrap(this.resetPassword(n));case 16:return t.abrupt("return",t.sent);case 19:throw t.t0;case 20:case"end":return t.stop()}}),null,this,[[5,11]],Promise)}},{key:"acquireTokenSilent",value:function(e){var n;return c.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.a.awrap(this.getAccountForPolicy(this.config.auth.policies.signInSignUp));case 2:if(!(n=t.sent)){t.next=9;break}return t.next=6,c.a.awrap(this.pca.acquireTokenSilent(B(B({},e),{},{account:n})));case 6:return t.abrupt("return",t.sent);case 9:throw Error("Could not find existing account for sign in sign up policy");case 10:case"end":return t.stop()}}),null,this,null,Promise)}},{key:"isSignedIn",value:function(){var e;return c.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,c.a.awrap(this.getAccountForPolicy(this.config.auth.policies.signInSignUp));case 2:return e=n.sent,n.abrupt("return",void 0!==e);case 4:case"end":return n.stop()}}),null,this,null,Promise)}},{key:"signOut",value:function(e){var n,t,r=this;return c.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,c.a.awrap(this.pca.getAccounts());case 2:return n=a.sent,t=n.map((function(n){return r.pca.signOut(B(B({},e),{},{account:n}))})),a.next=6,c.a.awrap(Promise.all(t));case 6:return a.abrupt("return",!0);case 7:case"end":return a.stop()}}),null,this,null,Promise)}},{key:"resetPassword",value:function(e){var n,t,r,o;return c.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:if(n=e.webviewParameters,t=E()(e,["webviewParameters"]),r=B(B({},n),{},{ios_prefersEphemeralWebBrowserSession:!0}),!this.config.auth.policies.passwordReset){s.next=14;break}if("ios"!==a.a.OS){s.next=6;break}return s.next=6,c.a.awrap(W(1e3));case 6:return o=this.getAuthority(this.config.auth.policies.passwordReset),s.next=9,c.a.awrap(this.pca.acquireToken(B(B({},t),{},{webviewParameters:r,authority:o})));case 9:return s.next=11,c.a.awrap(this.signIn(e));case 11:return s.abrupt("return",s.sent);case 14:throw Error("B2CClient missing password reset policy");case 15:case"end":return s.stop()}}),null,this,null,Promise)}},{key:"getAccountForPolicy",value:function(e){var n;return c.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.a.awrap(this.pca.getAccounts());case 2:return n=t.sent,t.abrupt("return",n.find((function(n){return n.identifier.includes(e.toLowerCase())})));case 4:case"end":return t.stop()}}),null,this,null,Promise)}},{key:"getAuthority",value:function(e){return this.config.auth.authorityBase+"/"+e}}]),e}();R.B2C_PASSWORD_CHANGE="AADB2C90118";var j=["https://stashcafe.onmicrosoft.com/api/user_impersonation"],L=new R({auth:{clientId:"fc8ecae3-0883-45f4-ac1c-013dfa11cb9c",authorityBase:"https://stashcafe.b2clogin.com/tfp/stashcafe.onmicrosoft.com",policies:{signInSignUp:"B2C_1_SignInUp",passwordReset:"B2C_1_PasswordReset"}},cache:{cacheLocation:"localStorage"}});function U(){var e=l.a.useState(null),n=i()(e,2),t=n[0],r=n[1],o=l.a.useState(!1),s=i()(o,2),u=s[0],h=s[1],w={ios_prefersEphemeralWebBrowserSession:u};l.a.useEffect((function(){c.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.a.awrap(L.isSignedIn());case 2:if(!e.sent){e.next=9;break}return e.t0=r,e.next=7,c.a.awrap(L.acquireTokenSilent({scopes:j}));case 7:e.t1=e.sent,(0,e.t0)(e.t1);case 9:case"end":return e.stop()}}),null,null,null,Promise)}),[]);return l.a.createElement(p.a,{style:D.container},l.a.createElement(v.a,{style:D.buttonContainer},t?l.a.createElement(l.a.Fragment,null,l.a.createElement(g.a,{style:D.button,onPress:function(){var e;return c.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,c.a.awrap(L.acquireTokenSilent({scopes:j}));case 3:e=n.sent,r(e),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),console.warn(n.t0);case 10:case"end":return n.stop()}}),null,null,[[0,7]],Promise)}},l.a.createElement(d.a,null,"Acquire Token (Silent)")),l.a.createElement(g.a,{style:D.button,onPress:function(){return c.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.a.awrap(L.signOut());case 3:r(null),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.warn(e.t0);case 9:case"end":return e.stop()}}),null,null,[[0,6]],Promise)}},l.a.createElement(d.a,null,"Sign Out"))):l.a.createElement(g.a,{style:D.button,onPress:function(){var e;return c.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,c.a.awrap(L.signIn({scopes:j,webviewParameters:w}));case 3:e=n.sent,r(e),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),console.warn(n.t0);case 10:case"end":return n.stop()}}),null,null,[[0,7]],Promise)}},l.a.createElement(d.a,null,"Sign In")),"ios"===a.a.OS?l.a.createElement(g.a,{style:[D.button,D.switchButton],onPress:function(){return h(!u)}},l.a.createElement(d.a,null,"Prefer ephemeral browser session (iOS only)"),l.a.createElement(m.a,{value:u,onValueChange:h})):null),l.a.createElement(f.a,{style:D.scrollView},l.a.createElement(d.a,null,JSON.stringify(t,null,2))))}var D=h.a.create({container:{flex:1},buttonContainer:{flexDirection:"row",flexWrap:"wrap",padding:"0.5%"},button:{backgroundColor:"aliceblue",borderWidth:1,margin:"0.5%",padding:8,width:"49%",justifyContent:"center",alignItems:"center"},disabledButton:{backgroundColor:"#ddd"},switchButton:{flexDirection:"row",justifyContent:"space-around",padding:4,width:"99%"},scrollView:{marginHorizontal:"1%",marginBottom:"1%",borderWidth:1}}),F=t(32);if(r.a.registerComponent(F.a,(function(){return U})),"web"===a.a.OS){var q=document.getElementById("root");r.a.runApplication(F.a,{rootTag:q})}}},[[60,1,2]]]);
//# sourceMappingURL=app.75a47e50.chunk.js.map